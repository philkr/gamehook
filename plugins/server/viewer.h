#pragma once
#include <string>
const std::string viewer(std::string host, const std::vector<std::string> & targets) {
    std::string target_concat = "";
    for(auto t: targets) {
        if (target_concat.size()) target_concat += ",";
        target_concat += "\""+t+"\"";
    }
    std::string res = 
"<html>\n"
"<body>\n"
"    <p id=\"img_span\"></p>\n"
"    <textarea rows=\"20\" cols=\"100\" id=\"gamestate\">gamestate</textarea>\n"
"\n"
"    <script>\n"
"        var HOST = \""+host+"\";\n"
"        var TARGETS = ["+target_concat+"];\n"
"\n"
"        // Create all target images (placeholders)\n"
"        var images = [];\n"
"        var img_span = document.getElementById(\"img_span\");\n"
"        for (var i = 0; i < TARGETS.length; i++) {\n"
"            var img = document.createElement(\"IMG\");\n"
"            img.src = \"data:image/jpeg;base64,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\";\n"
"            img_span.appendChild(img);\n"
"            images.push(img);\n"
"        }\n"
"\n"
"        // Fetch the game state handle\n"
"        var game_state = document.getElementById(\"gamestate\");\n"
"        function updateGameState(id) {\n"
"            var request = new XMLHttpRequest();\n"
"            request.open(\"GET\", \"http://\" + HOST + \"/info?id=\" + id.toString());\n"
"            request.onreadystatechange = function () {\n"
"                if (request.readyState === 4 && request.status === 200)\n"
"                    game_state.value = request.responseText;\n"
"            };\n"
"            request.send(null);\n"
"        }\n"
"\n"
"\n"
"        // Use a WebSocket to get notified about new recoded images\n"
"        var ping_socket = new WebSocket(\"ws://\" + HOST + \"/ping\");\n"
"\n"
"        ping_socket.onmessage = function (event) {\n"
"            var msg = JSON.parse(event.data);\n"
"            if (msg.message == \"frame_recorded\") {\n"
"                updateGameState(msg.id);\n"
"                for (var i = 0; i < TARGETS.length; i++)\n"
"                    images[i].src = \"http://\" + HOST + \"/bmp?t=\" + TARGETS[i] + \"&id=\" + msg.id.toString();\n"
"            }\n"
"        }\n"
"    </script>\n"
"</body>\n"
"</html>\n"
; return res;}
